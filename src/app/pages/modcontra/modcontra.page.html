<ion-header>
  <ion-toolbar color="--ion-color-primary">
    <ion-buttons slot="start">
      <ion-menu-button></ion-menu-button>
      <ion-back-button></ion-back-button>
    </ion-buttons>
    <ion-title class="title-page">Modificar Contraseña</ion-title>
  </ion-toolbar>
</ion-header>

<ion-content scrollY="true">
  <div class="home-page"></div>
  <!-- Reload -->
<ion-refresher slot="fixed" (ionRefresh)="handleRefresh($event)">
  <ion-refresher-content
    pullingIcon="chevron-down-circle-outline"

  >
  <div class="honeycomb">
    <div></div>
    <div></div>
    <div></div>
    <div></div>
    <div></div>
    <div></div>
    <div></div>
  </div>
  
  </ion-refresher-content>
</ion-refresher>

<h1 class="titulo">
  Cambiar Contraseña
</h1>

<div class="cambiar-password">
  <form [formGroup]="miFormulario" (ngSubmit)="onSubmit()">
    <!-- Campo para la contraseña actual -->
    <ion-item>
      <ion-icon name="lock-closed-outline" slot="start"></ion-icon>
      <ion-input placeholder="Contraseña actual" formControlName="oldPassword" [type]="showPassword ? 'text' : 'password'"></ion-input>
      <ion-icon [name]="showPassword ? 'eye-off-outline' : 'eye-outline'" slot="end" (click)="showPassword = !showPassword"></ion-icon>
    </ion-item>
    <div *ngIf="miFormulario.get('oldPassword')?.invalid && miFormulario.get('oldPassword')?.touched">
      <ion-text color="danger">Debe ingresar la contraseña actual</ion-text>
    </div>

    <!-- Campo para la nueva contraseña -->
    <ion-item>
      <ion-icon name="lock-closed-outline" slot="start"></ion-icon>
      <ion-input placeholder="Nueva contraseña" formControlName="newPassword" [type]="showPassword ? 'text' : 'password'"></ion-input>
      <ion-icon [name]="showPassword ? 'eye-off-outline' : 'eye-outline'" slot="end" (click)="showPassword = !showPassword"></ion-icon>
    </ion-item>
    <div *ngIf="miFormulario.get('newPassword')?.invalid && miFormulario.get('newPassword')?.touched">
      <ion-text color="danger" *ngIf="miFormulario.get('newPassword')?.errors?.['required']">Debe ingresar una nueva contraseña</ion-text>
      <ion-text color="danger" *ngIf="miFormulario.get('newPassword')?.errors?.['minlength']">La nueva contraseña debe tener al menos 6 caracteres</ion-text>
    </div>

    <!-- Campo para confirmar la nueva contraseña -->
    <ion-item>
      <ion-icon name="lock-closed-outline" slot="start"></ion-icon>
      <ion-input placeholder="Confirmar nueva contraseña" formControlName="confirmPassword" [type]="showPassword ? 'text' : 'password'"></ion-input>
      <ion-icon [name]="showPassword ? 'eye-off-outline' : 'eye-outline'" slot="end" (click)="showPassword = !showPassword"></ion-icon>
    </ion-item>
    <div *ngIf="miFormulario.get('confirmPassword')?.invalid && miFormulario.get('confirmPassword')?.touched">
      <ion-text color="danger" *ngIf="miFormulario.get('confirmPassword')?.errors?.['required']">Debe confirmar la nueva contraseña</ion-text>
      <ion-text color="danger" *ngIf="miFormulario.errors?.['notMatching']">Las contraseñas no coinciden</ion-text>
    </div>

    <!-- Botón para enviar el formulario -->
    <ion-button expand="full" type="submit" [disabled]="miFormulario.invalid">Cambiar Contraseña</ion-button>
  </form>
</div>

</ion-content>
